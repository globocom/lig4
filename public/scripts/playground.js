!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(){this.move=function(e){var t=Math.round((e.length-1)*Math.random());return e[t]},this["char"]="R",this.username="RandomAlgorithm"}function o(e,t){return g=e,g.code?void(h.value=g.code):h.value=v}function a(e){var t=null,r=null;try{g.algorithm=new y(h.value),g.algorithm.username="PlayerAlgorithm",g.algorithm["char"]="P",t=new x(g.algorithm,new n),r=t.run(),e(!1,r)}catch(o){throw e(!0,o),o}}function i(e){e.preventDefault(),l.innerHTML="Testando...",l.disabled=!0,a(function(e,t){return e?(l.innerHTML="Testar",l.disabled=!1,alert(t)):void 0})}function s(e){e.preventDefault(),h.value=v}function u(e){e.preventDefault(),l.disabled=!0,f.disabled=!0,f.innerHTML="Salvando...",a(function(e,t){return e?(l.disabled=!1,f.innerHTML="Salvar",f.disabled=!1,alert(t)):void m("/player/"+g.username).put({code:h.value},function(){l.disabled=!1,f.disabled=!1,f.innerHTML="Salvo c/ sucesso!",setTimeout(function(){f.innerHTML="Salvar"},2500)})})}function c(){l=document.getElementById("test-algorithm-button"),f=document.getElementById("submit-algorithm-button"),d=document.getElementById("reset-algorithm-button"),h=document.getElementById("playground-textarea"),p=document.getElementById("playground-runner"),new b({textarea:h}),v=["'use strict';\n\n","function Algorithm () {\n","    this.move = function (avaiblePositions) {\n","        return avaiblePositions[0];\n","    }","\n}\n","\nreturn Algorithm;\n"].join(""),l.addEventListener("click",i),f.addEventListener("click",u),d.addEventListener("click",s),m("/player/"+h.getAttribute("data-username")).get(o)}var l,f,d,h,p,v,g,m=r(2),b=r(3),y=r(1),x=r(5);document.addEventListener("DOMContentLoaded",c)},function(e,t){"use strict";function r(e){if(this.constructor=new Function("window",e)({}),!this.constructor||"Algorithm"!==this.constructor.name||"function"!=typeof this.constructor)throw new Error("You need to return a Algorithm function;");if(this.instance=new this.constructor,!this.instance.move||"function"!=typeof this.instance.move)throw new Error("The Algorithm need to have a move method to make the plays;");if("number"!=typeof this.instance.move([0]))throw new Error("The Algorithm move method should return a number;");return new this.constructor}e.exports=r},function(e,t){function r(e){var t=new XMLHttpRequest;return{get:function(r){t.open("GET",n+e),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.addEventListener("load",function(){r(JSON.parse(t.response).payload,t.status)}),t.send()},put:function(r,o){t.open("PUT",n+e),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.addEventListener("load",function(){o(JSON.parse(t.response).payload,t.status)}),t.send(JSON.stringify(r))}}}var n="http://"+document.location.host+"/api";e.exports=r},function(e,t,r){var n,o,a=a||function(){var e={};return{add:function(t,r){if("object"==typeof t){var n;for(n=0;n<t.length;n++){var o=t[n];e[o]||(e[o]=[]),e[o].push(r)}}else e[t]||(e[t]=[]),e[t].push(r)},get:function(t){return e[t]?e[t]:void 0}}}(),i=i||function(e){"function"!=typeof String.prototype.repeat&&(String.prototype.repeat=function(e){if(1>e)return"";if(e%2)return this.repeat(e-1)+this;var t=this.repeat(e/2);return t+t}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],o=arguments[1],a=0;r>a;a++)if(a in t){var i=t[a];e.call(o,i,a,t)&&n.push(i)}return n});var t,r,n={textarea:null,replaceTab:!0,softTabs:!0,tabSize:4,autoOpen:!0,overwrite:!0,autoStrip:!0,autoIndent:!0,fence:!1},o={keyMap:[{open:'"',close:'"',canBreak:!1},{open:"'",close:"'",canBreak:!1},{open:"(",close:")",canBreak:!1},{open:"[",close:"]",canBreak:!0},{open:"{",close:"}",canBreak:!0}]},i={_callHook:function(e,t){var r=a.get(e);if(t="boolean"==typeof t&&t===!1?!1:!0,r)if(t){var o,s=n.textarea,u=s.value,c=i.cursor.get();for(o=0;o<r.length;o++)r[o].call(void 0,{editor:{element:s,text:u,levelsDeep:i.levelsDeep()},caret:{pos:c},lines:{current:i.cursor.getLine(u,c),total:i.editor.getLines(u)}})}else for(o=0;o<r.length;o++)r[o].call(void 0)},defineNewLine:function(){var e=document.createElement("textarea");e.value="\n",r=2==e.value.length?"\r\n":"\n"},defineTabSize:function(e){return"undefined"!=typeof n.textarea.style.OTabSize?void(n.textarea.style.OTabSize=e):"undefined"!=typeof n.textarea.style.MozTabSize?void(n.textarea.style.MozTabSize=e):"undefined"!=typeof n.textarea.style.tabSize?void(n.textarea.style.tabSize=e):void 0},cursor:{getLine:function(e,t){return e.substring(0,t).split("\n").length},get:function(){if("number"==typeof document.createElement("textarea").selectionStart)return n.textarea.selectionStart;if(document.selection){var e=0,t=n.textarea.createTextRange(),r=document.selection.createRange().duplicate(),o=r.getBookmark();for(t.moveToBookmark(o);0!==t.moveStart("character",-1);)e++;return e}},set:function(e,t){if(t||(t=e),n.textarea.setSelectionRange)n.textarea.focus(),n.textarea.setSelectionRange(e,t);else if(n.textarea.createTextRange){var r=n.textarea.createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",e),r.select()}},selection:function(){var e,t,o,a,s,u=n.textarea,c=0,l=0;return"number"==typeof u.selectionStart&&"number"==typeof u.selectionEnd?(c=u.selectionStart,l=u.selectionEnd):(t=document.selection.createRange(),t&&t.parentElement()==u&&(e=i.editor.get(),a=e.length,o=u.createTextRange(),o.moveToBookmark(t.getBookmark()),s=u.createTextRange(),s.collapse(!1),o.compareEndPoints("StartToEnd",s)>-1?c=l=a:(c=-o.moveStart("character",-a),c+=e.slice(0,c).split(r).length-1,o.compareEndPoints("EndToEnd",s)>-1?l=a:(l=-o.moveEnd("character",-a),l+=e.slice(0,l).split(r).length-1)))),c==l?!1:{start:c,end:l}}},editor:{getLines:function(e){return e.split("\n").length},get:function(){return n.textarea.value.replace(/\r/g,"")},set:function(e){n.textarea.value=e}},fenceRange:function(){if("string"==typeof n.fence){for(var e=i.editor.get(),t=i.cursor.get(),r=0,o=e.indexOf(n.fence),a=0;o>=0&&(a++,!(o+r>t));)r+=o+n.fence.length,e=e.substring(o+n.fence.length),o=e.indexOf(n.fence);return t>r&&o+r>t&&a%2===0?!0:!1}return!0},isEven:function(e,t){return t%2},levelsDeep:function(){var e,t,r=i.cursor.get(),n=i.editor.get(),a=n.substring(0,r),s=0;for(e=0;e<a.length;e++)for(t=0;t<o.keyMap.length;t++)o.keyMap[t].canBreak&&(o.keyMap[t].open==a.charAt(e)&&s++,o.keyMap[t].close==a.charAt(e)&&s--);var u=0,c=["'",'"'];for(e=0;e<o.keyMap.length;e++)if(o.keyMap[e].canBreak)for(t in c)u+=a.split(c[t]).filter(i.isEven).join("").split(o.keyMap[e].open).length-1;var l=s-u;return l>=0?l:0},deepExtend:function(e,t){for(var r in t)t[r]&&t[r].constructor&&t[r].constructor===Object?(e[r]=e[r]||{},i.deepExtend(e[r],t[r])):e[r]=t[r];return e},addEvent:function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r)},removeEvent:function(e,t,r){e.addEventListener?e.removeEventListener(t,r,!1):e.attachEvent&&e.detachEvent("on"+t,r)},preventDefaultEvent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},s={tabKey:function(e){if(i.fenceRange()){if(9==e.keyCode){i.preventDefaultEvent(e);var r=!0;i._callHook("tab:before");var n=i.cursor.selection(),o=i.cursor.get(),a=i.editor.get();if(n){for(var s=n.start;s--;)if("\n"==a.charAt(s)){n.start=s+1;break}var u,c=a.substring(n.start,n.end),l=c.split("\n");if(e.shiftKey){for(u=0;u<l.length;u++)l[u].substring(0,t.length)==t&&(l[u]=l[u].substring(t.length));c=l.join("\n"),i.editor.set(a.substring(0,n.start)+c+a.substring(n.end)),i.cursor.set(n.start,n.start+c.length)}else{for(u in l)l[u]=t+l[u];c=l.join("\n"),i.editor.set(a.substring(0,n.start)+c+a.substring(n.end)),i.cursor.set(n.start,n.start+c.length)}}else{var f=a.substring(0,o),d=a.substring(o),h=f+t+d;e.shiftKey?a.substring(o-t.length,o)==t&&(h=a.substring(0,o-t.length)+d,i.editor.set(h),i.cursor.set(o-t.length)):(i.editor.set(h),i.cursor.set(o+t.length),r=!1)}i._callHook("tab:after")}return r}},enterKey:function(e){if(i.fenceRange()&&13==e.keyCode){i.preventDefaultEvent(e),i._callHook("enter:before");var n,a,s=i.cursor.get(),u=i.editor.get(),c=u.substring(0,s),l=u.substring(s),f=c.charAt(c.length-1),d=l.charAt(0),h=i.levelsDeep(),p="",v="";if(h){for(;h--;)p+=t;for(p=p,n=p.length+1,a=0;a<o.keyMap.length;a++)o.keyMap[a].open==f&&o.keyMap[a].close==d&&(v=r)}else n=1;var g=c+r+p+v+p.substring(0,p.length-t.length)+l;i.editor.set(g),i.cursor.set(s+n),i._callHook("enter:after")}},deleteKey:function(e){if(i.fenceRange()&&8==e.keyCode){i.preventDefaultEvent(e),i._callHook("delete:before");var t,r=i.cursor.get(),n=i.editor.get(),a=n.substring(0,r),s=n.substring(r),u=a.charAt(a.length-1),c=s.charAt(0);if(i.cursor.selection()===!1){for(t=0;t<o.keyMap.length;t++)if(o.keyMap[t].open==u&&o.keyMap[t].close==c){var l=n.substring(0,r-1)+n.substring(r+1);return i.editor.set(l),void i.cursor.set(r-1)}var l=n.substring(0,r-1)+n.substring(r);i.editor.set(l),i.cursor.set(r-1)}else{var f=i.cursor.selection(),l=n.substring(0,f.start)+n.substring(f.end);i.editor.set(l),i.cursor.set(r)}i._callHook("delete:after")}}},u={openedChar:function(e,t){i.preventDefaultEvent(t),i._callHook("openChar:before");var r=i.cursor.get(),o=i.editor.get(),a=o.substring(0,r),s=o.substring(r),u=a+e.open+e.close+s;n.textarea.value=u,i.cursor.set(r+1),i._callHook("openChar:after")},closedChar:function(e,t){var r=i.cursor.get(),n=i.editor.get(),o=n.substring(r,r+1);return o==e.close?(i.preventDefaultEvent(t),i._callHook("closeChar:before"),i.cursor.set(i.cursor.get()+1),i._callHook("closeChar:after"),!0):!1}},c={filter:function(e){if(i.fenceRange()){var t=e.which||e.keyCode;if(39!=t&&(40!=t||0!==e.which)){var r,a=String.fromCharCode(t);for(r=0;r<o.keyMap.length;r++)if(o.keyMap[r].close==a){var s=n.overwrite&&u.closedChar(o.keyMap[r],e);!s&&o.keyMap[r].open==a&&n.autoOpen&&u.openedChar(o.keyMap[r],e)}else o.keyMap[r].open==a&&n.autoOpen&&u.openedChar(o.keyMap[r],e)}}},listen:function(){n.replaceTab&&i.addEvent(n.textarea,"keydown",s.tabKey),n.autoIndent&&i.addEvent(n.textarea,"keydown",s.enterKey),n.autoStrip&&i.addEvent(n.textarea,"keydown",s.deleteKey),i.addEvent(n.textarea,"keypress",c.filter),i.addEvent(n.textarea,"keydown",function(){i._callHook("keydown")}),i.addEvent(n.textarea,"keyup",function(){i._callHook("keyup")})}},l=function(e){e.textarea&&(i._callHook("init:before",!1),i.deepExtend(n,e),i.defineNewLine(),n.softTabs?t=" ".repeat(n.tabSize):(t="	",i.defineTabSize(n.tabSize)),c.listen(),i._callHook("init:after",!1))};this.destroy=function(){i.removeEvent(n.textarea,"keydown",s.tabKey),i.removeEvent(n.textarea,"keydown",s.enterKey),i.removeEvent(n.textarea,"keydown",s.deleteKey),i.removeEvent(n.textarea,"keypress",c.filter)},l(e)};"undefined"!=typeof e&&e.exports&&(e.exports=i),"undefined"==typeof ender&&(this.Behave=i,this.BehaveHooks=a),n=[],o=function(){return i}.apply(t,n),!(void 0!==o&&(e.exports=o))},function(e,t,r){(function(t){function r(){this.width=7,this.height=6,this.maxMoves=this.width*this.height,this.matrix=this.buildMatrix()}r.prototype.push=function(e,t){var r=this.matrix[t].lastIndexOf(null);return 0>r?!1:(this.matrix[t][r]=e["char"],[t,r])},r.prototype.buildMatrix=function(){for(var e=[],t=0;t<this.width;t++){e[t]=[];for(var r=0;r<this.height;r++)e[t][r]=null}return e},r.prototype.getAvailableColumns=function(){var e=[];for(var t in this.matrix)this.matrix[t].lastIndexOf(null)>=0&&e.push(parseInt(t));return e},r.prototype.draw=function(){for(var e=0;e<this.height;e++){for(var r=0;r<this.width;r++){var n=this.matrix[r][e]||" ";t.stdout.write("| "+n+" ")}t.stdout.write("\n")}},e.exports=r}).call(t,r(6))},function(e,t,r){"use strict";function n(e,t){this.board=new o,this.players=[e,t]}var o=r(4);n.status={INVALID_MOVE:"INVALID_MOVE",LIG4:"LIG4",DRAW:"DRAW"},n.prototype.run=function(){for(var e={winner:null,reason:null,logs:[],sequence:[]},t=0;t<this.board.maxMoves;t++){var r=this.players[t%2],o=this.board.getAvailableColumns(),a=r.move(o);if(o.indexOf(a)<0){e.winner=this.players[(t+1)%2],e.reason=n.status.INVALID_MOVE;break}var i=this.board.push(r,a);e.logs.push({username:r.username,move:i});var s=this.matchAnalyzer();if(s){e.winner=r,e.reason=n.status.LIG4,e.sequence=s;break}}return e.winner||(e.reason=n.status.DRAW),e},n.prototype.matchAnalyzer=function(){for(var e=null,t=0;t<this.board.width;t++){var r=this.board.matrix[t];if(e)break;for(var n=0;n<this.board.height;n++){var o=r[n];if(null!=o){if(r[n+1]==o&&r[n+2]==o&&r[n+3]==o){e=[[t,n],[t,n+1],[t,n+2],[t,n+3]];break}if(this.board.matrix[t]&&this.board.matrix[t+3]&&this.board.matrix[t+1][n]==o&&this.board.matrix[t+2][n]==o&&this.board.matrix[t+3][n]==o){e=[[t,n],[t+1,n],[t+2,n],[t+3,n]];break}if(this.board.matrix[t]&&this.board.matrix[t+3]&&this.board.matrix[t+1][n+1]==o&&this.board.matrix[t+2][n+2]==o&&this.board.matrix[t+3][n+3]==o){e=[[t,n],[t+1,n+1],[t+2,n+2],[t+3,n+3]];break}if(this.board.matrix[t]&&this.board.matrix[t+3]&&this.board.matrix[t+1][n-1]==o&&this.board.matrix[t+2][n-2]==o&&this.board.matrix[t+3][n-3]==o){e=[[t,n],[t+1,n-1],[t+2,n-2],[t+3,n-3]];break}}}}return e},e.exports=n},function(e,t){function r(){c=!1,i.length?u=i.concat(u):l=-1,u.length&&n()}function n(){if(!c){var e=setTimeout(r);c=!0;for(var t=u.length;t;){for(i=u,u=[];++l<t;)i[l].run();l=-1,t=u.length}i=null,c=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var i,s=e.exports={},u=[],c=!1,l=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new o(e,t)),1!==u.length||c||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}]);